{{ define "title" }}
{{ .Listing.Title }}
{{ end }}

{{ define "main" }}

<section class="single-listing listing__{{.Listing.ID}}">
  <hgroup>
    <h3>{{ .Listing.Title }}</h3>
    <p>{{ formatPrice .Listing.Price }} | {{ .Listing.Location }}</p>
  </hgroup>
  <div class="meta">
    <span>{{ humanDate .Listing.CreatedAt }} | Posted by <a href="#">{{ .Listing.Username }}</a></span>
    {{ if ne .User.ID .Listing.UserID }}
    {{ if .Listing.Saved }}
    <a onclick="saveBtn.click()" class="" href="#">unsave</a>
    <form action="/listings/unsave/{{.Listing.ID}}" method="post">
      <input type="hidden" name="_method" value="DELETE">
      <button id="saveBtn" hidden type="submit">Unsave</button>
    </form>
    {{ else }}
    <a onclick="saveBtn.click()" class="" href="#">save</a>
    <form action="/listings/save/{{.Listing.ID}}" method="post">
      <button id="saveBtn" hidden type="submit">Save</button>
    </form>
    {{ end }}
    {{ end }}
  </div>

  <hr>

  <img class="listing-image" src="/uploads/{{.Listing.Banner}}" alt="">
  <br>
  <br>
  <p>{{ .Listing.Description }}</p>

  {{ if gt (len .Listing.Pictures) 0 }}
  <h5>More images of this listing</h5>
  <div class="listing-image-grid">
    {{ range .Listing.Pictures }}
    <a href="/uploads/{{.}}" data-lightbox="listing-images">
      <img src="/uploads/{{.}}" alt="">
      </a>
    {{ end }}
  </div>
  {{ end }}
</section>

{{ end }}
